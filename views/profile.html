<div class="profile-header">
  <button class="logout-button" ng-click="profile.logout()">Logout</button>
  <a href="#!/" id="backButton" class="back-button" ng-click="profile.goBack()"
    >‚Üê Back</a
  >
  <img src="icons/user-solid.svg" alt="Profile Picture" class="profile-image" />

  <div class="profile-info">
    <h1>{{profile.user.username}}</h1>
    <button class="edit-profile-btn" ng-click="profile.openEditUsername()">
      Edit Profile
    </button>
  </div>

  <div class="profile-tabs">
    <button
      ng-class="{active: profile.activeTab === 'created'}"
      ng-click="profile.setTab('created')"
    >
      Created
    </button>
    <button
      ng-class="{active: profile.activeTab === 'saved'}"
      ng-click="profile.setTab('saved')"
    >
      Saved
    </button>
  </div>

  <div class="created-outfit" ng-show="profile.activeTab === 'created'">
    <button class="create-btn" ng-click="profile.openCreatePopup()">
      Create Outfit
    </button>

    <!-- Bulk Actions -->
    <div class="bulk-actions" ng-if="profile.selectedOutfits.length > 0">
      <button
        class="delete-selected-btn"
        ng-click="profile.deleteSelectedOutfits()"
      >
        Delete Selected ({{profile.selectedOutfits.length}})
      </button>
    </div>

    <!-- Outfit Grid -->
    <div class="outfit-grid" ng-if="profile.userOutfits.length > 0">
      <div class="outfit-card" ng-repeat="outfit in profile.userOutfits">
        <div class="outfit-selection">
          <input
            type="checkbox"
            ng-checked="profile.selectedOutfits.indexOf(outfit._id) !== -1"
            ng-click="profile.toggleOutfitSelection(outfit._id)"
          />
        </div>
        <img ng-src="{{outfit.image}}" alt="{{outfit.name}}" />
        <h3>{{outfit.name}}</h3>
        <p>{{outfit.description}}</p>
        <button class="edit-btn" ng-click="profile.openEditOutfit(outfit)">
          Edit
        </button>
      </div>
    </div>

    <p ng-if="!profile.userOutfits.length">
      Nothing to show... yet! Pins you create will live here.
    </p>
  </div>

  <div class="saved-outfits" ng-show="profile.activeTab === 'saved'">
    <p>You haven't saved any Pins yet.</p>
    <button class="find-ideas-btn">Find Ideas</button>
  </div>
</div>

<!-- Edit Username Popup -->
<div
  class="popup-overlay"
  ng-show="profile.isEditUsernameVisible"
  ng-click="profile.closeEditUsername($event)"
>
  <div class="popup-content edit-username">
    <h2>Edit Profile</h2>

    <div class="form-group">
      <label>New Username</label>
      <input type="text" ng-model="profile.newUsername" />
    </div>

    <div class="popup-actions">
      <button class="submit-btn" ng-click="profile.updateUsername()">
        Save Changes
      </button>
      <button class="cancel-btn" ng-click="profile.closeEditUsername()">
        Cancel
      </button>
    </div>

    <div class="delete-section">
      <hr class="divider" />
      <button class="delete-btn" ng-click="profile.deleteAccount()">
        Delete Account
      </button>
    </div>
  </div>
</div>

<!-- Create Outfit Popup -->
<div
  class="popup-overlay"
  ng-show="profile.isPopupVisible"
  ng-click="profile.closePopup($event)"
>
  <div class="popup-content">
    <h2>Create New Outfit</h2>

    <div class="form-group">
      <label>Outfit Name</label>
      <input
        type="text"
        ng-model="profile.newOutfit.name"
        placeholder="Enter outfit name"
      />
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea
        ng-model="profile.newOutfit.description"
        placeholder="Enter description"
      ></textarea>
    </div>

    <div class="form-group">
      <label>Image URL</label>
      <input
        type="text"
        ng-model="profile.newOutfit.image"
        placeholder="Enter image URL"
      />
    </div>

    <div class="popup-actions">
      <button class="submit-btn" ng-click="profile.submitOutfit()">Save</button>
      <button class="cancel-btn" ng-click="profile.closePopup()">Cancel</button>
    </div>
  </div>
</div>

<!-- Edit Outfit Popup -->
<div
  class="popup-overlay"
  ng-show="profile.isEditOutfitVisible"
  ng-click="profile.closeEditOutfit($event)"
>
  <div class="popup-content">
    <h2>Edit Outfit</h2>

    <div class="form-group">
      <label>Outfit Name</label>
      <input
        type="text"
        ng-model="profile.editingOutfit.name"
        placeholder="Enter outfit name"
      />
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea
        ng-model="profile.editingOutfit.description"
        placeholder="Enter description"
      ></textarea>
    </div>

    <div class="form-group">
      <label>Image URL</label>
      <input
        type="text"
        ng-model="profile.editingOutfit.image"
        placeholder="Enter image URL"
      />
    </div>

    <div class="popup-actions">
      <button class="submit-btn" ng-click="profile.submitEditOutfit()">
        Save Changes
      </button>
      <button class="cancel-btn" ng-click="profile.closeEditOutfit()">
        Cancel
      </button>
    </div>
  </div>
</div>
